import{_ as K,e as L,d as B}from"./BYtzin4T.js";import{i as k,aA as j,r as o,l as I,c as l,b as c,a as r,w as x,n as z,d as y,t as g,ag as E,e as M,o as n,a1 as T}from"./C05GwoDL.js";import{_ as q}from"./Cf1NkPvp.js";import{u as D}from"./BVRkdi-0.js";const F={key:0,class:"flex items-center justify-center pt-10 w-full"},P={key:1,class:"max-w-7xl mx-auto p-6"},R={class:"flex items-center justify-between mb-3"},Y={class:"flex flex-col md:flex-row gap-4 mb-6 justify-between"},G={class:"text-2xl font-bold"},H={class:"text-primary"},J={class:"flex flex-col sm:flex-row justify-end items-center gap-4"},O={key:0,class:"text-gray-500 italic"},Q={key:1,class:"text-red-500"},W={key:2,class:"text-gray-500"},X={key:3},oe={__name:"index",setup(Z){const _=j(),w=k(()=>_.params.id),C=D(),f=_.query.collegeId,h=o([]),t=o(!1),u=o(""),a=o(""),i=o("All"),v=o(""),b=async()=>{try{t.value=!0;const s=await C(`/collage_ap/${f}/checks?start_date=1900-01-01&end_date=2999-12-31`);s?.success?(h.value=(s?.data||[]).filter(e=>String(e.id)===String(w.value)),v.value=_.query.name||"Unknown User"):u.value=s?.msg||"No checks found"}catch(s){console.error("Error fetching checks:",s),u.value="Error loading checks"}finally{t.value=!1}},p=k(()=>h.value.filter(s=>{const e=s.c_check_payee?.toLowerCase().includes(a.value.toLowerCase())||s.check_memo?.toLowerCase().includes(a.value.toLowerCase()),m=i.value==="All"||s.c_check_status===i.value;return e&&m})),A=[{accessorKey:"c_user_name",header:"User Name"},{accessorKey:"agreed_amount",header:"Agreed Amount"},{accessorKey:"c_check_date",header:"Check Date"},{accessorKey:"c_check_amount",header:"Check Amount"},{accessorKey:"c_check_status",header:"Check Status"},{accessorKey:"c_check_account_year",header:"Account Year"},{accessorKey:"check_memo",header:"Check Memo"}];return I(b),(s,e)=>{const m=K,S=M,U=T,V=L,N=q,$=B;return t.value?(n(),l("div",F,[c(m,{"show-loader":t.value,size:"md"},null,8,["show-loader"])])):(n(),l("div",P,[r("div",R,[c(S,{to:`/users?id=${z(f)}`,class:"text-sm text-blue-600 hover:underline"},{default:x(()=>e[3]||(e[3]=[y(" ← Back to Users ",-1)])),_:1,__:[3]},8,["to"])]),r("div",Y,[r("h1",G,[e[4]||(e[4]=y(" Checks for ",-1)),r("span",H,g(v.value),1)]),r("div",J,[c(V,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=d=>a.value=d),icon:"i-lucide-search",size:"md",variant:"outline",placeholder:"Search...",class:"w-full md:w-fit",ui:{trailing:"pe-1"}},E({_:2},[a.value?.length?{name:"trailing",fn:x(()=>[c(U,{color:"neutral",variant:"link",size:"sm",icon:"i-lucide-circle-x","aria-label":"Clear input",onClick:e[0]||(e[0]=d=>a.value="")})]),key:"0"}:void 0]),1032,["modelValue"]),c(N,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=d=>i.value=d),items:[{label:"All",value:"All"},{label:"Created",value:"Created"},{label:"Printed",value:"printed"}],class:"w-full md:w-48"},null,8,["modelValue"])])]),t.value?(n(),l("div",O,"Loading...")):u.value?(n(),l("div",Q,g(u.value),1)):p.value.length===0?(n(),l("div",W," No checks found. ")):(n(),l("div",X,[c($,{data:p.value,columns:A,loading:t.value,class:"flex-1"},null,8,["data","loading"])]))]))}}};export{oe as default};
